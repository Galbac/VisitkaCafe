{% extends 'main/base.html' %}
{% load static %}
{% block title %}–ü–æ–ª—É—Ñ–∞–±—Ä–∏–∫–∞—Ç—ã ‚Äî –ï–¥–∞ –±–µ–∑ –≤—Ä–µ–¥–∞{% endblock %}
{% block description %}–®–∏—Ä–æ–∫–∏–π –≤—ã–±–æ—Ä –ø–æ–ª–µ–∑–Ω—ã—Ö –ø–æ–ª—É—Ñ–∞–±—Ä–∏–∫–∞—Ç–æ–≤ –±–µ–∑ —Å–∞—Ö–∞—Ä–∞, –≥–ª—é—Ç–µ–Ω–∞ –∏ –ì–ú–û. –ó–∞–∫–∞–∂–∏—Ç–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!{% endblock %}

{% block content %}
<section class="products-section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">–ù–∞—à–∏ –ø–æ–ª—É—Ñ–∞–±—Ä–∏–∫–∞—Ç—ã</h2>
            <div class="section-subtitle">–í–∏—Ç—Ä–∏–Ω–∞ –ø—Ä–æ–¥—É–∫—Ü–∏–∏</div>
            <div class="section-divider"></div>
        </div>

        <div class="products-grid" id="productsGrid">
            {% for product in products %}
                <div class="product-card" data-slug="{{ product.slug }}" tabindex="0">
                    <div class="product-img-wrap">
                        {% if product.image %}
                            <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-img-mini" loading="lazy">
                        {% else %}
                            <div class="product-img-placeholder">
                                <span class="placeholder-icon">üç≤</span>
                            </div>
                        {% endif %}
                    </div>
                    <div class="product-content">
                        <h3 class="product-name">{{ product.name }}</h3>
                        <p class="product-desc">{{ product.description|truncatechars:40 }}</p>
                        <div class="product-cta">
                            <span class="cta-text">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</span>
                            <span class="cta-icon">‚Üí</span>
                        </div>
                    </div>
                </div>
            {% empty %}
                <div class="no-products">
                    <div class="no-products-icon">üì≠</div>
                    <h3 class="no-products-title">–ü—Ä–æ–¥—É–∫—Ç—ã —Å–∫–æ—Ä–æ –ø–æ—è–≤—è—Ç—Å—è</h3>
                    <p class="no-products-text">
                        –°–ª–µ–¥–∏—Ç–µ –∑–∞ –Ω–æ–≤–æ—Å—Ç—è–º–∏ –≤ –Ω–∞—à–µ–º
                        <a href="https://www.instagram.com/eda__bez.vreda/" target="_blank" class="insta-link-simple">Instagram</a>.
                    </p>
                </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
<div id="productModal" class="modal" role="dialog" aria-labelledby="modalName">
    <div class="modal-overlay"></div>
    <div class="modal-content">
        <button class="modal-close" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
        <div class="modal-body">
            <div class="modal-spinner" id="modalSpinner">
                <div class="spinner"></div>
            </div>
            <div class="modal-img-wrap">
                <img id="modalImg" src="" alt="">
            </div>
            <h3 id="modalName" class="modal-name"></h3>
            <p id="modalDesc" class="modal-desc"></p>
            <div class="modal-info-block">
                <strong>–í–µ—Å:</strong>
                <span id="modalWeight"></span>
            </div>
            <div class="modal-info-block composition-block">
                <strong>–°–æ—Å—Ç–∞–≤:</strong>
                <ul class="ingredients-list" id="compositionList"></ul>
            </div>
            <div class="macro-block">
                <h4>–ü–∏—â–µ–≤–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å –Ω–∞ 100 –≥:</h4>
                <div class="macro-grid">
                    <div class="macro-item">
                        <span class="macro-label">–ö–∞–ª–æ—Ä–∏–∏</span>
                        <span class="macro-value" id="modalCalories"></span>
                    </div>
                    <div class="macro-item">
                        <span class="macro-label">–ë–µ–ª–∫–∏</span>
                        <span class="macro-value" id="modalProteins"></span>
                    </div>
                    <div class="macro-item">
                        <span class="macro-label">–ñ–∏—Ä—ã</span>
                        <span class="macro-value" id="modalFats"></span>
                    </div>
                    <div class="macro-item">
                        <span class="macro-label">–£–≥–ª–µ–≤–æ–¥—ã</span>
                        <span class="macro-value" id="modalCarbs"></span>
                    </div>
                </div>
            </div>
            <div id="modalTech" class="modal-tech"></div>
            <div id="modalCert" class="modal-cert"></div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
    <link href="{% static 'assets/css/products.css' %}" rel="stylesheet">
{% endblock %}

{% block extra_js %}
<script src="{% static 'assets/js/products.js' %}"></script>
{% endblock %}